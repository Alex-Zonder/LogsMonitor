<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Анализатор логов</title>
    <script src="scripts/system.js"></script>

    <link rel="stylesheet" type="text/css" href="templates/cyber_2/main.css" />
    <script src="templates/cyber_2/main.js"></script>
  </head>
  <body>
  <!--We are using node <script>document.write(process.versions.node)</script>,
  Chromium <script>document.write(process.versions.chrome)</script>,
  and Electron <script>document.write(process.versions.electron)</script>.-->



    <!--     Menu     -->
    <div id="Menu_Holder">
      <center><h3>Меню</h3></center>
      <hr>
      <table width="100%">
        <tr>
          <td>Комманда:</td>
          <td align="right"><input type="text" id="Input_Exec_Command" value="ls -l" size="15" /></td>
        </tr>
        <tr>
          <td>Сортировка:</td>
          <td align="right"><input type="text" id="Input_Grep" value="index" size="15" /></td>
        </tr>
        <tr>
          <td>Подсветить:</td>
          <td align="right"><input type="text" id="Input_Hilight" value="aleksandrpilipenko" size="15" /></td>
        </tr>
      </table>
      <hr><center><button onclick="RunCommand();">Выполнить</button></center>
    </div>



    <!--     Body     -->
    <div id="Body_Holder">
      <div id="Body_Block">
        <center>
          <h3>Анализатор логов</h3>
        </center>

        <hr><div id="test"></div>
    </div>
    </div>



    <!--     Bottom Menu     -->
    <div class="Bottom_Menu_Holder">
      <!--   Menu   -->
      <img src="images/menu.png" style="height:28px;" onclick="Button_Main_Menu()">
      <!--   DevTools   -->
      <span style="float:right;text-align:right;">
        <button onclick="mainWindow.webContents.openDevTools()">DevTools</button>
      </span>
    </div>



  </body>
</html>





<script type="text/javascript">
  var mainWindow = require('electron').remote.getGlobal('mainWindow')
  //document.getElementById('test').innerHTML = "<hr>" + ReadFileSync('package.json');

  function RunCommand () {
    var comm = Input_Exec_Command.value;
    if (Input_Grep.value != "") comm += " | grep \"" + Input_Grep.value + "\"";
    RunExec(comm);
  }
  function ExecReturn (data) { //aleksandrpilipenko
    data = data.replace(new RegExp('\r?\n','g'), "<br />");
    if (Input_Hilight.value != "") data = data.replace(new RegExp(Input_Hilight.value, 'g'), "<font color='red'>" + Input_Hilight.value + "</font>");
    document.getElementById('test').innerHTML += data + "<hr>";
    document.getElementById('Body_Holder').scrollTop = document.getElementById('Body_Block').clientHeight;
    //alert(document.getElementById('Body_Block').clientHeight);
  }
</script>
