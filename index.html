<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Анализатор логов</title>
    <script src="scripts/system.js"></script>

    <link rel="stylesheet" type="text/css" href="templates/cyber_2/main.css" />
    <script src="templates/cyber_2/main.js"></script>
  </head>
  <body>
  <!--We are using node <script>document.write(process.versions.node)</script>,
  Chromium <script>document.write(process.versions.chrome)</script>,
  and Electron <script>document.write(process.versions.electron)</script>.-->


    <!--     Menu     -->
    <div id="Menu_Holder">
      <center><h3>Меню</h3></center>
      <hr>
      <table width="100%">
        <tr>
          <td>Комманда:</td>
          <td align="right"><input type="text" id="Input_Exec_Command" value="ls -l" size="18" /></td>
        </tr>
        <tr>
          <td>Сортировка:</td>
          <td align="right"><input type="text" id="Input_Grep" value="index" size="18" /></td>
        </tr>
        <tr>
          <td>Подсветить:</td>
          <td align="right"><input type="text" id="Input_Hilight" value="aleksandrpilipenko" size="18" /></td>
        </tr>
      </table>
      <hr><center><button onclick="RunCommand();">Выполнить</button></center>
    </div>

    <div id="Menu_Body_Separator"></div>
    <script type="text/javascript">
    Menu_Body_Separator.onmousedown = function(e) {Enable_Change_Menu_Width (e);}
    document.body.onmouseup = function(e) {Disable_Change_Menu_Width (e);}
    document.body.onmousemove = function(e) {Change_Menu_Width (e);}
    </script>

    <!--     Body     -->
    <div id="Body_Holder">
      <div id="Body_Block">
        <center>
          <h3>Анализатор логов</h3>
        </center>

        <hr><div id="test"></div>
      </div>
    </div>


    <!--     Bottom Menu     -->
    <div class="Bottom_Menu_Holder">
      <!--   Menu   -->
      <img src="images/menu.png" style="height:28px;cursor:pointer;" onclick="Button_Main_Menu()">
      <!--   DevTools   -->
      <span style="float:right;text-align:right;">
        <img src="images/settings.png" style="height:14px;padding:7px;cursor:pointer;" onclick="Button_DevTools();">
      </span>
    </div>


  </body>
</html>





<script type="text/javascript">
  //   Open/Close DevTools   //
  var mainWindow = require('electron').remote.getGlobal('mainWindow');
  function Button_DevTools () {
    if (mainWindow.webContents.isDevToolsOpened()) {
      mainWindow.webContents.closeDevTools();
    }
    else {
      mainWindow.webContents.openDevTools();
    }
  }


  //   Run Command   //
  function RunCommand () {
    var comm = Input_Exec_Command.value;
    if (Input_Grep.value != "") comm += " | grep \"" + Input_Grep.value + "\"";
    RunExec(comm);
  }
  function ExecReturn (data) { //aleksandrpilipenko
    data = data.replace(new RegExp('\r?\n','g'), "<br />");
    if (Input_Hilight.value != "")
      data = data.replace(new RegExp(Input_Hilight.value, 'g'), "<font color='red'>" + Input_Hilight.value + "</font>");
    document.getElementById('test').innerHTML += data + "<hr>";
    document.getElementById('Body_Holder').scrollTop = document.getElementById('Body_Block').clientHeight;
    //alert(document.getElementById('Body_Block').clientHeight);
  }
</script>
