<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Анализатор логов</title>
    <script src="scripts/system.js"></script>
    <script src="scripts/keyboard.js"></script>

    <link rel="stylesheet" type="text/css" href="templates/cyber_2/main.css" />
    <script src="templates/cyber_2/main.js"></script>
  </head>
  <body>
  <!--We are using node <script>document.write(process.versions.node)</script>,
  Chromium <script>document.write(process.versions.chrome)</script>,
  and Electron <script>document.write(process.versions.electron)</script>.-->


    <!--     Menu     -->
    <div id="Menu_Holder">
      <div id="Head">Меню</div>

      <div class="menu_but" id="index" onclick="MenuOpen(Main);">- Главная</div>
      <div class="menu_but" id="index" onclick="MenuOpen(Trminal);">- Терминал</div>
      <div class="menu_but" id="index" onclick="MenuOpen(Files);">- Файлы</div>

      <center>Терминал</center>
      <table width="100%">
        <tr>
          <td>Комманда:</td>
          <td align="right"><input type="text" id="Input_Exec_Command" value="ls -l" size="18" /></td>
        </tr>
        <tr>
          <td>Сортировка:</td>
          <td align="right"><input type="text" id="Input_Grep" value="index\|js" size="18" /></td>
        </tr>
        <tr>
          <td>Подсветить:</td>
          <td align="right"><input type="text" id="Input_Hilight" value="aleksandrpilipenko" size="18" /></td>
        </tr>
      </table>
      <center><button onclick="RunCommand();">Выполнить</button></center>
    </div>

    <div id="Menu_Body_Separator"></div>
    <script type="text/javascript">
    Menu_Body_Separator.onmousedown = function(e) {Enable_Change_Menu_Width (e);}
    document.body.onmouseup = function(e) {Disable_Change_Menu_Width (e);}
    document.body.onmousemove = function(e) {Change_Menu_Width (e);}
    </script>








    <!--     Body     -->
    <div id="Body_Holder">

      <!--   Terminal   -->
      <div id="Main">
        <script type="text/javascript">
          document.write(ReadFileSync("./main.html"));
        </script>
      </div>

      <!--   Terminal   -->
      <div id="Trminal" style="display:none;height:100%;">
        <script type="text/javascript">
          document.write(ReadFileSync("./terminal.html"));
        </script>
      </div>

      <!--   Files   -->
      <div id="Files" style="display:none;">
        <script type="text/javascript">
          document.write(ReadFileSync("./files.html"));
        </script>
      </div>

    </div>








    <!--     Bottom Menu     -->
    <div class="Bottom_Menu_Holder">
      <!--   Menu   -->
      <img class="Clicable" src="images/menu.png" style="height:28px;" onclick="Button_Main_Menu()">
      <!--   DevTools   -->
      <span style="float:right;text-align:right;">
        <img class="Clicable" src="images/settings.png" style="height:14px;padding:7px;" onclick="Button_DevTools();">
      </span>
    </div>


  </body>
</html>





<script type="text/javascript">
  //   Open/Close DevTools   //
  var mainWindow = require('electron').remote.getGlobal('mainWindow');
  function Button_DevTools () {
    if (mainWindow.webContents.isDevToolsOpened()) {
      mainWindow.webContents.closeDevTools();
    }
    else {
      mainWindow.webContents.openDevTools();
    }
  }


  //   Add Keyboard Events   //
  function OnEnter() {RunCommand ();}
  function OnEscape() {Button_Main_Menu ();}



  //   Run Command   //
  function RunCommand () {
    var comm = Input_Exec_Command.value;
    if (Input_Grep.value != "") comm += " | grep \"" + Input_Grep.value + "\"";
    document.getElementById('test').innerHTML += "<font color='teal'>Команда: " + comm + "</font><hr color='teal'>";
    RunExec(comm);
  }
  function ExecReturn (data) { //aleksandrpilipenko
    data = data.replace(new RegExp('\r?\n','g'), "<br />");
    if (Input_Hilight.value != "")
      data = data.replace(new RegExp(Input_Hilight.value, 'g'), "<font color='red'>" + Input_Hilight.value + "</font>");
    document.getElementById('test').innerHTML += data + "<hr>";
    document.getElementById('Body_Block').scrollTop = document.getElementById('test').clientHeight;
    //alert(document.getElementById('Body_Block').clientHeight);
  }
</script>
